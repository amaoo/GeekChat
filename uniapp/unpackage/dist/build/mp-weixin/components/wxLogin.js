(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/wxLogin"],{"365d":function(t,e,n){"use strict";n.r(e);var a=n("bc88"),r=n("88a4");for(var u in r)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("f66a");var o=n("f0c5"),i=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=i.exports},"803b":function(t,e,n){},"88a4":function(t,e,n){"use strict";n.r(e);var a=n("fed6"),r=n.n(a);for(var u in a)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},bc88:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"9027"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"3bc5"))}},r=function(){var t=this.$createElement;this._self._c},u=[]},f66a:function(t,e,n){"use strict";var a=n("803b"),r=n.n(a);r.a},fed6:function(t,e,n){"use strict";(function(t,a){var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=r(n("2eee")),o=r(n("c973")),i={data:function(){return{PrimaryColor:"#7966ff",avatarUrl:"",nickName:"",show:!1}},watch:{showWxLogin:function(t){this.show=t,t&&(this.avatarUrl=this.vuex_user.avatar,this.nickName=this.vuex_user.name)}},methods:{onClose:function(){this.$u.vuex("showWxLogin",!1)},onChooseAvatar:function(t){console.log(t),this.avatarUrl=t.detail.avatarUrl},onBlur:function(t){console.log(t),this.nickName=t.detail.value},checkURL:function(t){var e=t,n=new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/);return 1==n.test(e)},submit:function(){var e=this;return(0,o.default)(u.default.mark((function n(){var r,i,s,c,l,f,d,h,v,m,p;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e,r.avatarUrl){n.next=4;break}return t.showToast({title:"请上传头像~",icon:"none"}),n.abrupt("return");case 4:if(r.nickName){n.next=7;break}return t.showToast({title:"请输入昵称~",icon:"none"}),n.abrupt("return");case 7:if(!r.checkURL(r.avatarUrl)){n.next=11;break}return r.onClose(),r.$emit("submit",{name:e.nickName,avatar:e.avatarUrl}),n.abrupt("return");case 11:return i=r.avatarUrl.substring(r.avatarUrl.lastIndexOf(".")+1),s=String(1e5*Math.random()).split(".")[0],c=new Date,l=c.getFullYear(),f=c.getMonth()+1<10?"0"+(c.getMonth()+1):c.getMonth()+1,d=c.getDate()<10?"0"+c.getDate():c.getDate(),h=c.getHours()<10?"0"+c.getHours():c.getHours(),v=c.getMinutes()<10?"0"+c.getMinutes():c.getMinutes(),m=c.getSeconds()<10?"0"+c.getSeconds():c.getSeconds(),p="user_"+l+f+d+h+v+m+"_"+s+"."+i,t.showLoading({mask:!0,title:"加载中..."}),n.next=24,a.uploadFile({filePath:r.avatarUrl,cloudPath:p}).then(function(){var e=(0,o.default)(u.default.mark((function e(n){return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.getTempFileURL({fileList:[n.fileID]}).then((function(e){e.fileList.length>0?r.avatarUrl=e.fileList[0].tempFileURL:t.showLoading({mask:!0,title:"更新失败..."})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 24:r.onClose(),t.hideLoading(),r.$emit("submit",{name:e.nickName,avatar:e.avatarUrl});case 27:case"end":return n.stop()}}),n)})))()}}};e.default=i}).call(this,n("543d")["default"],n("a9ff")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/wxLogin-create-component',
    {
        'components/wxLogin-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("365d"))
        })
    },
    [['components/wxLogin-create-component']]
]);
